FROM node:20-slim AS base

ENV NEXT_PUBLIC_STRAPI_URL=${NEXT_PUBLIC_STRAPI_URL}
ENV NEXT_PUBLIC_MEILISEARCH_URL=${NEXT_PUBLIC_MEILISEARCH_URL}
ENV STRAPI_URL_INTERNAL=${STRAPI_URL_INTERNAL}
ENV STRAPI_SECRET_KEY=${STRAPI_SECRET_KEY}

FROM base AS build
COPY . /opt/website

WORKDIR /opt/website
RUN npm install

EXPOSE 3000
